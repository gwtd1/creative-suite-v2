<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brainstorm - The Cozy Commute</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            background: var(--primary-bg);
            overflow-y: auto;
            margin: 0;
            padding: 0;
        }

        .brainstorm-layout {
            display: flex;
            height: 100vh;
        }

        /* AI Chat Panel */
        .ai-chat-panel {
            width: 380px;
            background: var(--card-bg);
            border-right: var(--border);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .chat-header {
            padding: var(--space-lg);
            border-bottom: var(--border);
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-purple) 100%);
            color: var(--white);
        }

        .chat-header h3 {
            font-size: var(--font-lg);
            font-weight: 600;
            margin-bottom: var(--space-xxs);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .chat-header h3::before {
            content: '✨';
        }

        .chat-header p {
            font-size: var(--font-xs);
            opacity: 0.9;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-lg);
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }

        .chat-message {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-message.ai {
            align-items: flex-start;
        }

        .chat-message.user {
            align-items: flex-end;
        }

        .message-bubble {
            max-width: 85%;
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-md);
            font-size: var(--font-base);
            line-height: 1.5;
        }

        .chat-message.ai .message-bubble {
            background: var(--gray-100);
            color: var(--text-primary);
            border-bottom-left-radius: var(--radius-sm);
        }

        .chat-message.user .message-bubble {
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-purple) 100%);
            color: var(--white);
            border-bottom-right-radius: var(--radius-sm);
        }

        .message-time {
            font-size: var(--font-xs);
            color: var(--text-muted);
            padding: 0 var(--space-xs);
        }

        .chat-suggestions {
            padding: var(--space-sm) var(--space-lg);
            border-top: var(--border);
            background: var(--primary-bg);
        }

        .suggestion-chips {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-xs);
        }

        .suggestion-chip {
            padding: 6px var(--space-sm);
            background: var(--card-bg);
            border: var(--border);
            border-radius: var(--radius-full);
            font-size: var(--font-xs);
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .suggestion-chip:hover {
            border-color: var(--accent-primary);
            background: rgba(25, 87, 219, 0.05);
            color: var(--accent-primary);
        }

        .chat-input-area {
            padding: var(--space-md) var(--space-lg);
            border-top: var(--border);
            background: var(--card-bg);
        }

        .chat-input-wrapper {
            display: flex;
            gap: var(--space-xs);
            align-items: flex-end;
            background: var(--gray-100);
            border-radius: var(--radius-full);
            padding: var(--space-xs) var(--space-sm);
        }

        .chat-input {
            flex: 1;
            border: none;
            background: transparent;
            font-size: var(--font-base);
            resize: none;
            outline: none;
            font-family: var(--font-family);
            max-height: 120px;
            min-height: 24px;
        }

        .chat-send-btn {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-purple) 100%);
            border: none;
            border-radius: 50%;
            color: var(--white);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: transform var(--transition-fast);
        }

        .chat-send-btn:hover {
            transform: scale(1.1);
        }

        .typing-indicator {
            display: flex;
            gap: var(--space-xxs);
            padding: var(--space-sm) var(--space-md);
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--text-muted);
            border-radius: 50%;
            animation: typingBounce 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingBounce {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .brainstorm-main {
            flex: 1;
            overflow-y: auto;
        }

        .brainstorm-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--space-xl);
        }

        .brainstorm-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-xl);
        }

        .brainstorm-title-section h2 {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: var(--space-sm);
        }

        .brainstorm-canvas {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--space-xl);
            margin-bottom: var(--space-xl);
        }

        /* AI Generation Panel */
        .ai-generation-panel {
            background: var(--card-bg);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            border: 2px solid var(--border-color);
            margin-bottom: var(--space-xl);
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) backwards;
        }

        .generation-status {
            margin-bottom: var(--space-lg);
        }

        .ai-thinking {
            font-size: var(--font-base);
            color: var(--accent-primary);
            font-weight: 600;
            margin-bottom: var(--space-sm);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .ai-thinking::before {
            content: '🎨';
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .progress-bar {
            height: 6px;
            background: var(--gray-200);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-purple) 100%);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .concept-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-lg);
            margin-bottom: var(--space-xl);
        }

        .concept-card {
            background: var(--primary-bg);
            border-radius: var(--radius-xl);
            overflow: hidden;
            border: 2px solid var(--border-color);
            transition: var(--transition-fast);
            cursor: pointer;
            position: relative;
        }

        .concept-card.active {
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-lg);
        }

        .concept-card:hover {
            border-color: var(--accent-primary);
            transform: translateY(-2px);
        }

        .concept-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .concept-overlay {
            padding: var(--space-lg);
        }

        .ai-confidence {
            font-size: var(--font-xs);
            color: var(--success-color);
            font-weight: 600;
            margin-bottom: var(--space-sm);
        }

        .concept-reasoning {
            font-size: var(--font-sm);
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: var(--space-md);
        }

        .concept-actions {
            display: flex;
            gap: var(--space-sm);
            padding: 0 var(--space-lg) var(--space-lg);
        }

        .concept-actions .action-btn {
            flex: 1;
            padding: var(--space-sm);
            font-size: var(--font-sm);
        }

        .generation-controls {
            background: var(--gray-100);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            margin-top: var(--space-lg);
        }

        .prompt-input {
            margin-bottom: var(--space-lg);
        }

        .prompt-input textarea {
            width: 100%;
            padding: var(--space-md);
            border: var(--border);
            border-radius: var(--radius-lg);
            font-family: var(--font-family);
            font-size: var(--font-base);
            resize: vertical;
            min-height: 80px;
        }

        .generate-btn {
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-purple) 100%);
            color: var(--white);
            border: none;
            padding: var(--space-sm) var(--space-lg);
            border-radius: var(--radius-lg);
            font-size: var(--font-base);
            font-weight: 600;
            cursor: pointer;
            margin-top: var(--space-sm);
            transition: var(--transition-fast);
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .style-controls, .target-controls {
            margin-bottom: var(--space-lg);
        }

        .style-controls h4, .target-controls h4 {
            font-size: var(--font-base);
            font-weight: 600;
            margin-bottom: var(--space-sm);
            color: var(--text-primary);
        }

        .style-options, .audience-options {
            display: flex;
            gap: var(--space-xs);
            flex-wrap: wrap;
        }

        .style-btn, .audience-btn {
            padding: var(--space-xs) var(--space-md);
            border: 2px solid var(--border-color);
            background: var(--card-bg);
            border-radius: var(--radius-lg);
            font-size: var(--font-sm);
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .style-btn.active, .audience-btn.active {
            border-color: var(--accent-primary);
            background: rgba(25, 87, 219, 0.1);
            color: var(--accent-primary);
            font-weight: 600;
        }

        .style-btn:hover, .audience-btn:hover {
            border-color: var(--accent-primary);
        }

        .ai-status-panel {
            background: var(--card-bg);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            border: 2px solid var(--border-color);
            margin-bottom: var(--space-xl);
        }

        .ai-agent-thinking {
            margin-bottom: var(--space-lg);
        }

        .agent {
            font-size: var(--font-sm);
            margin-bottom: var(--space-xs);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .agent.creative {
            background: rgba(146, 86, 217, 0.1);
            color: var(--accent-purple);
        }

        .agent.strategy {
            background: rgba(25, 87, 219, 0.1);
            color: var(--accent-primary);
        }

        .agent.design {
            background: rgba(45, 157, 120, 0.1);
            color: var(--accent-green);
        }

        .generation-insights {
            border-top: var(--border);
            padding-top: var(--space-lg);
        }

        .generation-insights h4 {
            font-size: var(--font-base);
            font-weight: 600;
            margin-bottom: var(--space-sm);
            color: var(--text-primary);
        }

        .generation-insights ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .generation-insights li {
            font-size: var(--font-sm);
            color: var(--text-secondary);
            margin-bottom: var(--space-xs);
            padding-left: var(--space-lg);
            position: relative;
        }

        .generation-insights li::before {
            position: absolute;
            left: 0;
            font-size: var(--font-sm);
        }

        /* Scene Description Panel */
        .scene-panel {
            background: var(--card-bg);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            border: 2px solid var(--border-color);
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.1s backwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .panel-label {
            font-size: 11px;
            font-weight: 700;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: var(--space-md);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .panel-label::before {
            content: '';
            width: 3px;
            height: 16px;
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-purple) 100%);
            border-radius: 2px;
        }

        .scene-description-text {
            font-size: var(--font-lg);
            line-height: 1.8;
            color: var(--text-primary);
        }

        /* Image Asset Panel */
        .asset-panel {
            background: var(--card-bg);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            border: 2px solid var(--border-color);
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.2s backwards;
        }

        .ai-badge {
            display: inline-flex;
            align-items: center;
            gap: 7.2px;
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-purple) 100%);
            color: var(--white);
            padding: 7.2px 14.4px;
            border-radius: var(--radius-full);
            font-size: var(--font-xs);
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .ai-badge::before {
            content: "✨";
        }

        .ai-thinking-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 11px;
            color: var(--text-muted);
        }

        .suggestion-title {
            font-size: var(--h3);
            font-weight: 600;
            margin-bottom: var(--space-md);
            color: var(--text-primary);
        }

        .dam-source-header {
            margin-bottom: var(--space-md);
        }

        .dam-source-title {
            font-size: var(--font-xs);
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
        }

        .dam-name {
            font-size: var(--font-sm);
            font-weight: 600;
            color: var(--accent-primary);
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 7px;
        }

        .dam-name::before {
            content: '📦';
            font-size: 14px;
        }

        .asset-name {
            font-size: var(--font-xs);
            color: var(--text-secondary);
            margin-bottom: 7px;
        }

        .view-source-btn {
            background: none;
            border: none;
            color: var(--accent-primary);
            font-size: 11px;
            font-weight: 500;
            cursor: pointer;
            padding: 0;
            text-decoration: underline;
            transition: var(--transition-fast);
        }

        .view-source-btn:hover {
            color: var(--accent-secondary);
        }

        .source-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, margin-top 0.3s ease-out;
        }

        .source-details.expanded {
            max-height: 150px;
            margin-top: var(--space-xs);
        }

        .source-details-content {
            padding: 10px var(--space-sm);
            background: var(--gray-100);
            border-radius: var(--radius-md);
            border: var(--border);
            font-size: 11px;
        }

        .source-detail-row {
            display: flex;
            gap: var(--space-xs);
            margin-bottom: var(--space-xxs);
        }

        .source-detail-row:last-child {
            margin-bottom: 0;
        }

        .source-detail-label {
            color: var(--text-muted);
            min-width: 60px;
        }

        .source-detail-value {
            color: var(--text-primary);
            font-weight: 500;
        }

        .asset-image-container {
            width: 100%;
            height: 400px;
            background: linear-gradient(135deg, var(--gray-100) 0%, var(--gray-300) 100%);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            position: relative;
            margin-bottom: var(--space-md);
        }

        .suggestion-image-placeholder {
            font-size: 80px;
        }

        .confidence-badge {
            position: absolute;
            top: var(--space-sm);
            right: var(--space-sm);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 6px var(--space-sm);
            border-radius: var(--radius-lg);
            font-size: var(--font-xs);
            font-weight: 600;
            color: var(--success-color);
            border: 1px solid rgba(22, 163, 74, 0.2);
        }

        .dam-source-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 32px var(--space-sm) var(--space-sm);
            opacity: 0;
            animation: fadeInOut 6s ease-in-out;
            animation-delay: 1s;
        }

        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(5px); }
            15% { opacity: 1; transform: translateY(0); }
            85% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(5px); }
        }

        .dam-source-text {
            font-size: 10px;
            color: var(--white);
            font-weight: 500;
        }

        .dam-info-trigger {
            position: absolute;
            bottom: var(--space-sm);
            left: var(--space-sm);
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            cursor: help;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: var(--transition-fast);
        }

        .dam-info-trigger:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.1);
        }

        .dam-tooltip {
            display: none;
        }

        .performance-metrics {
            display: flex;
            gap: var(--space-lg);
            margin-bottom: var(--space-lg);
        }

        .metric {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .metric-label {
            font-size: var(--font-xs);
            color: var(--text-muted);
        }

        .metric-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--success-color);
        }

        .metric-value.prediction {
            color: var(--accent-primary);
        }

        .suggestion-actions {
            display: flex;
            gap: 14px;
            margin-bottom: var(--space-lg);
        }

        .action-btn {
            padding: var(--space-sm) var(--space-lg);
            border-radius: var(--radius-lg);
            font-size: var(--font-base);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition-fast);
            border: none;
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .action-btn.primary {
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-purple) 100%);
            color: var(--white);
        }

        .action-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .action-btn.secondary {
            background: var(--card-bg);
            color: var(--accent-primary);
            border: 2px solid var(--accent-primary);
        }

        .action-btn.secondary:hover {
            background: rgba(25, 87, 219, 0.05);
        }

        .action-btn.tertiary {
            background: var(--gray-100);
            color: var(--text-secondary);
        }

        .action-btn.tertiary:hover {
            background: var(--gray-200);
        }

        .action-btn.approve {
            background: linear-gradient(135deg, var(--accent-green) 0%, #22c55e 100%);
            color: var(--white);
        }

        .action-btn.approve:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .brainstorm-layout {
                flex-direction: column;
            }
            
            .ai-chat-panel {
                width: 100%;
                height: auto;
                order: 2;
            }
            
            .concept-gallery {
                grid-template-columns: 1fr;
            }
            
            .style-options, .audience-options {
                flex-direction: column;
            }
            
            .concept-actions {
                flex-direction: column;
            }
            
            .concept-actions .action-btn {
                width: 100%;
            }
        }

        @media (max-width: 1024px) {
            .concept-gallery {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .ai-reasoning {
            background: var(--gray-100);
            border-radius: var(--radius-lg);
            border-left: 3px solid var(--accent-primary);
            overflow: hidden;
        }

        .ai-reasoning-title {
            font-size: var(--font-xs);
            font-weight: 600;
            color: var(--accent-primary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: var(--space-sm) var(--space-md);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: var(--transition-fast);
        }

        .ai-reasoning-title:hover {
            background: var(--gray-200);
        }

        .ai-reasoning-title::after {
            content: '▼';
            font-size: 10px;
            transition: transform 0.3s;
        }

        .ai-reasoning-title.collapsed::after {
            transform: rotate(-90deg);
        }

        .ai-reasoning-content {
            max-height: 500px;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
            padding: 0 var(--space-md) var(--space-md);
        }

        .ai-reasoning-content.collapsed {
            max-height: 0;
            padding: 0 var(--space-md);
        }

        .ai-reasoning-text {
            font-size: var(--font-base);
            line-height: 1.6;
            color: var(--text-primary);
        }

        .alternatives-section {
            margin-top: var(--space-lg);
            padding-top: var(--space-lg);
            border-top: var(--border);
            display: none;
        }

        .alternatives-section.active {
            display: block;
        }

        .alternatives-title {
            font-size: var(--font-base);
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: var(--space-md);
        }

        .alternatives-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-md);
        }

        .alternative-card {
            border: 2px solid var(--border-color);
            border-radius: var(--radius-xl);
            padding: var(--space-sm);
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .alternative-card:hover {
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-md);
        }

        .alternative-image {
            width: 100%;
            height: 120px;
            background: linear-gradient(135deg, var(--gray-100) 0%, var(--gray-300) 100%);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-xs);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
        }

        .alternative-info {
            font-size: var(--font-xs);
            color: var(--text-secondary);
        }

        .alternative-score {
            font-weight: 600;
            color: var(--accent-primary);
        }

        /* Ad Copy Panel - Full Width */
        .adcopy-panel {
            background: var(--card-bg);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            border: 2px solid var(--border-color);
            grid-column: 1 / -1;
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.3s backwards;
        }

        .adcopy-preview {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-xl);
            margin-top: var(--space-lg);
        }

        .adcopy-element {
            padding: var(--space-lg);
            background: var(--primary-bg);
            border-radius: var(--radius-xl);
            border: var(--border);
            transition: var(--transition-fast);
        }

        .adcopy-element:hover {
            border-color: var(--accent-primary);
            background: rgba(25, 87, 219, 0.05);
        }

        .adcopy-label {
            font-size: 10px;
            font-weight: 700;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.8px;
            margin-bottom: var(--space-sm);
        }

        .adcopy-text {
            font-size: var(--h3);
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1.4;
        }

        .adcopy-text.cta {
            color: var(--accent-primary);
        }

        /* Core Assets Section */
        .core-assets-section {
            background: var(--card-bg);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            border: 2px solid var(--border-color);
            margin-top: var(--space-xl);
            animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.4s backwards;
        }

        .assets-gallery {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-lg);
            margin-top: var(--space-lg);
        }

        .asset-card {
            background: var(--primary-bg);
            border-radius: var(--radius-xl);
            overflow: hidden;
            border: 2px solid var(--border-color);
            transition: var(--transition-fast);
            cursor: pointer;
        }

        .asset-card:hover {
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-lg);
            transform: translateY(-4px);
        }

        .asset-card-image {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, var(--gray-100) 0%, var(--gray-300) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            position: relative;
        }

        .asset-type-badge {
            position: absolute;
            top: var(--space-sm);
            left: var(--space-sm);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: var(--space-xxs) 10px;
            border-radius: var(--radius-md);
            font-size: 11px;
            font-weight: 600;
            color: var(--accent-primary);
        }

        .asset-card-info {
            padding: var(--space-md);
        }

        .asset-card-title {
            font-size: var(--font-base);
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
        }

        .asset-card-meta {
            display: flex;
            gap: var(--space-sm);
            font-size: var(--font-xs);
            color: var(--text-secondary);
        }

        .add-asset-card {
            background: var(--card-bg);
            border: 2px dashed var(--border-color);
            border-radius: var(--radius-xl);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 280px;
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .add-asset-card:hover {
            border-color: var(--accent-primary);
            background: rgba(25, 87, 219, 0.05);
        }

        .add-asset-card .icon {
            font-size: 48px;
            margin-bottom: var(--space-sm);
            opacity: 0.5;
        }

        .add-asset-card .text {
            font-size: var(--font-base);
            font-weight: 600;
            color: var(--text-secondary);
        }

        .back-btn {
            background: var(--gray-100);
            border: none;
            padding: var(--space-xs) var(--space-md);
            border-radius: var(--radius-lg);
            font-size: var(--font-base);
            cursor: pointer;
            color: var(--text-primary);
            font-weight: 500;
            transition: var(--transition-fast);
        }

        .back-btn:hover {
            background: var(--gray-200);
        }
    </style>
</head>
<body>
    <div class="brainstorm-layout">
        <!-- AI Chat Panel -->
        <div class="ai-chat-panel">
            <div class="chat-header">
                <h3>AI Assistant</h3>
                <p>Get creative guidance and suggestions</p>
            </div>

            <div class="chat-messages" id="chatMessages">
                <!-- Welcome Message -->
                <div class="chat-message ai">
                    <div class="message-bubble">
                        Hi! I'm here to help you brainstorm "The Cozy Commute" campaign. I can assist with:
                        <ul style="margin: 8px 0 0 20px; line-height: 1.8;">
                            <li>Refining the scene description</li>
                            <li>Suggesting alternative assets</li>
                            <li>Improving ad copy</li>
                            <li>Optimizing for your target audience</li>
                        </ul>
                        What would you like to work on?
                    </div>
                    <span class="message-time">Just now</span>
                </div>
            </div>

            <div class="chat-suggestions">
                <div class="suggestion-chips">
                    <div class="suggestion-chip" onclick="sendSuggestion('Generate more concepts')">More concepts</div>
                    <div class="suggestion-chip" onclick="sendSuggestion('Refine selected concept')">Refine concept</div>
                    <div class="suggestion-chip" onclick="sendSuggestion('Optimize for different audience')">Change audience</div>
                    <div class="suggestion-chip" onclick="sendSuggestion('What makes this effective?')">Why effective?</div>
                </div>
            </div>

            <div class="chat-input-area">
                <div class="chat-input-wrapper">
                    <textarea
                        class="chat-input"
                        id="chatInput"
                        placeholder="Ask me anything..."
                        rows="1"
                        onkeydown="handleChatKeydown(event)"
                    ></textarea>
                    <button class="chat-send-btn" onclick="sendChatMessage()">
                        ➤
                    </button>
                </div>
            </div>
        </div>

        <!-- Brainstorm Main Content -->
        <div class="brainstorm-main">
            <div class="brainstorm-container">
        <div class="brainstorm-header">
            <div class="brainstorm-title-section">
                <h2 id="brainstormTitle">The Cozy Commute</h2>
                <div class="idea-status-tags" style="display: flex; gap: 6px; margin-top: 8px;">
                    <span style="padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 600; background: linear-gradient(135deg, #e8eaf6 0%, #f3e5f5 100%); color: var(--accent-primary);">AI Generated</span>
                    <span style="font-size: 13px; color: var(--accent-primary); font-weight: 600; display: flex; align-items: center; gap: 6px;">👥 Hybrid Worker</span>
                </div>
            </div>
            <button class="back-btn" onclick="window.history.back()">← Back to Ideas</button>
        </div>

        <div class="brainstorm-canvas">
            <!-- AI Generation Panel -->
            <div class="ai-generation-panel">
                <div class="generation-status">
                    <div class="ai-thinking">Analyzing fall athleisure trends...</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 85%"></div>
                    </div>
                </div>
                
                <!-- Generated Concept Images -->
                <div class="concept-gallery">
                    <div class="concept-card active">
                        <img src="https://images.unsplash.com/photo-1544427920-c49ccfb85579?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80" alt="The Cozy Commute" class="concept-image">
                        <div class="concept-overlay">
                            <h3 class="suggestion-title">The Cozy Commute</h3>
                            <div class="ai-confidence">AI Confidence: 94%</div>
                            <div class="concept-reasoning">
                                Perfect blend of professional comfort and style. Targets hybrid workers who value versatility.
                            </div>
                        </div>
                        <div class="concept-actions">
                            <button class="action-btn primary">🔧 Refine Concept</button>
                            <button class="action-btn secondary">🔄 Generate Variations</button>
                            <button class="action-btn approve">✓ Use This Concept</button>
                        </div>
                    </div>
                    
                    <div class="concept-card">
                        <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" alt="Seamless Transitions" class="concept-image">
                        <div class="concept-overlay">
                            <h3 class="suggestion-title">Seamless Transitions</h3>
                            <div class="ai-confidence">AI Confidence: 91%</div>
                            <div class="concept-reasoning">
                                Emphasizes day-to-night versatility. Appeals to wellness enthusiasts and busy professionals.
                            </div>
                        </div>
                        <div class="concept-actions">
                            <button class="action-btn primary">🔧 Refine Concept</button>
                            <button class="action-btn secondary">🔄 Generate Variations</button>
                            <button class="action-btn approve">✓ Use This Concept</button>
                        </div>
                    </div>
                    
                    <div class="concept-card">
                        <img src="https://images.unsplash.com/photo-1506629905607-21867cfa5842?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" alt="Premium Basics" class="concept-image">
                        <div class="concept-overlay">
                            <h3 class="suggestion-title">Premium Basics</h3>
                            <div class="ai-confidence">AI Confidence: 88%</div>
                            <div class="concept-reasoning">
                                Focuses on quality and sustainability. Targets premium market segment with eco-conscious values.
                            </div>
                        </div>
                        <div class="concept-actions">
                            <button class="action-btn primary">🔧 Refine Concept</button>
                            <button class="action-btn secondary">🔄 Generate Variations</button>
                            <button class="action-btn approve">✓ Use This Concept</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- AI Generation Controls -->
            <div class="generation-controls">
                <div class="prompt-input">
                    <textarea placeholder="Describe additional concepts you'd like AI to generate..." rows="3"></textarea>
                    <button class="generate-btn">🎨 Generate New Concepts</button>
                </div>
                
                <div class="style-controls">
                    <h4>Style Direction</h4>
                    <div class="style-options">
                        <button class="style-btn active" data-style="lifestyle">Lifestyle</button>
                        <button class="style-btn" data-style="performance">Performance</button>
                        <button class="style-btn" data-style="minimal">Minimal</button>
                        <button class="style-btn" data-style="urban">Urban</button>
                    </div>
                </div>
                
                <div class="target-controls">
                    <h4>Target Audience</h4>
                    <div class="audience-options">
                        <button class="audience-btn active" data-audience="hybrid-workers">Hybrid Workers</button>
                        <button class="audience-btn" data-audience="wellness">Wellness Enthusiasts</button>
                        <button class="audience-btn" data-audience="professionals">Young Professionals</button>
                    </div>
                </div>
            </div>

            <!-- AI Status Panel -->
            <div class="ai-status-panel">
                <div class="ai-agent-thinking">
                    <div class="agent creative">🎨 Creative Agent: Analyzing color palettes...</div>
                    <div class="agent strategy">📊 Strategy Agent: Evaluating market fit...</div>
                    <div class="agent design">🎯 Design Agent: Optimizing composition...</div>
                </div>
                
                <div class="generation-insights">
                    <h4>AI Insights</h4>
                    <ul>
                        <li>✓ High engagement potential with 25-40 demographic</li>
                        <li>🎨 Fall 2025 trends align 94% with generated concepts</li>
                        <li>📱 Optimal for Instagram and TikTok marketing channels</li>
                        <li>🌱 Consider adding sustainability messaging for premium positioning</li>
                    </ul>
                </div>
            </div>

            <!-- Ad Copy Panel (Full Width) -->
            <div class="adcopy-panel">
                <div class="panel-label">AI-Generated Ad Copy</div>
                <div class="adcopy-preview">
                    <div class="adcopy-element">
                        <div class="adcopy-label">Line One (Title)</div>
                        <div class="adcopy-text">Your Commute, Reimagined</div>
                    </div>
                    <div class="adcopy-element">
                        <div class="adcopy-label">Line Two (Hook)</div>
                        <div class="adcopy-text">Turn travel time into your time. Comfort meets productivity.</div>
                    </div>
                    <div class="adcopy-element">
                        <div class="adcopy-label">Call-to-Action</div>
                        <div class="adcopy-text cta">Discover More →</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Core Assets Section -->
        <div class="core-assets-section">
            <div class="panel-label">Core Assets</div>
            <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">
                Creative assets for this campaign idea
            </p>

            <div class="assets-gallery">
                <!-- Asset Card 1 -->
                <div class="asset-card">
                    <div class="asset-card-image">
                        <img src="https://images.unsplash.com/photo-1544427920-c49ccfb85579?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="asset-type-badge">Image</div>
                    </div>
                    <div class="asset-card-info">
                        <div class="asset-card-title">Lifestyle Photo - Morning Commute</div>
                        <div class="asset-card-meta">
                            <span>📏 1080x1080</span>
                            <span>✅ Approved</span>
                        </div>
                    </div>
                </div>

                <!-- Asset Card 2 -->
                <div class="asset-card">
                    <div class="asset-card-image">
                        <img src="https://images.unsplash.com/photo-1434494878577-86c23bcb06b9?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="asset-type-badge">Video</div>
                    </div>
                    <div class="asset-card-info">
                        <div class="asset-card-title">15s Story - Athleisure Transition</div>
                        <div class="asset-card-meta">
                            <span>⏱️ 15s</span>
                            <span>🔄 Draft</span>
                        </div>
                    </div>
                </div>

                <!-- Asset Card 3 -->
                <div class="asset-card">
                    <div class="asset-card-image">
                        <img src="https://images.unsplash.com/photo-1586953208448-b95a79798f07?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" style="width: 100%; height: 100%; object-fit: cover;">
                        <div class="asset-type-badge">Graphic</div>
                    </div>
                    <div class="asset-card-info">
                        <div class="asset-card-title">Social Media Carousel</div>
                        <div class="asset-card-meta">
                            <span>📐 Multi-size</span>
                            <span>✅ Approved</span>
                        </div>
                    </div>
                </div>

                <!-- Add Asset Card -->
                <div class="add-asset-card">
                    <div class="icon">➕</div>
                    <div class="text">Add New Asset</div>
                </div>
            </div>
        </div>
            </div>
        </div>
    </div>

    <script>
        // Concept refinement functionality
        function refineConceptImage(conceptId) {
            showAIThinking("Refining concept based on your feedback...");
            
            // Simulate AI refinement process
            setTimeout(() => {
                updateConceptImage(conceptId, newGeneratedImage);
                showAIInsight("Updated concept emphasizes premium comfort and urban versatility");
            }, 2000);
        }

        // Generate variations functionality
        function generateVariations(conceptId) {
            showGenerationPanel();
            displayProgressBar("Generating 3 concept variations...");
            
            // Show multiple variations
            setTimeout(() => {
                displayVariationGrid([variation1, variation2, variation3]);
            }, 3000);
        }

        function showAIThinking(message) {
            const thinkingElement = document.querySelector('.ai-thinking');
            if (thinkingElement) {
                thinkingElement.textContent = message;
                // Animate progress bar
                const progressFill = document.querySelector('.progress-fill');
                if (progressFill) {
                    progressFill.style.width = '0%';
                    setTimeout(() => {
                        progressFill.style.width = '100%';
                    }, 100);
                }
            }
        }

        function showAIInsight(message) {
            // Add insight to the insights list
            const insightsList = document.querySelector('.generation-insights ul');
            if (insightsList) {
                const newInsight = document.createElement('li');
                newInsight.textContent = `✨ ${message}`;
                insightsList.appendChild(newInsight);
            }
        }

        // Style and audience controls
        function initializeControls() {
            // Style buttons
            document.querySelectorAll('.style-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.style-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const style = this.dataset.style;
                    showAIThinking(`Adapting concepts for ${style} style...`);
                });
            });

            // Audience buttons
            document.querySelectorAll('.audience-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.audience-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    const audience = this.dataset.audience;
                    showAIThinking(`Optimizing for ${audience.replace('-', ' ')} audience...`);
                });
            });

            // Generate button
            document.querySelector('.generate-btn').addEventListener('click', function() {
                const prompt = document.querySelector('.prompt-input textarea').value;
                if (prompt.trim()) {
                    showAIThinking(`Generating concepts: "${prompt}"...`);
                    // Simulate generation process
                    setTimeout(() => {
                        showAIInsight(`Generated new concepts based on: "${prompt}"`);
                    }, 3000);
                }
            });

            // Concept action buttons
            document.querySelectorAll('.concept-actions .action-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const action = this.textContent.trim();
                    const conceptCard = this.closest('.concept-card');
                    const conceptTitle = conceptCard.querySelector('.suggestion-title').textContent;
                    
                    if (action.includes('Refine')) {
                        showAIThinking(`Refining "${conceptTitle}" concept...`);
                        setTimeout(() => {
                            showAIInsight(`Refined "${conceptTitle}" with enhanced visual appeal`);
                        }, 2000);
                    } else if (action.includes('Variations')) {
                        showAIThinking(`Generating variations of "${conceptTitle}"...`);
                        setTimeout(() => {
                            showAIInsight(`Generated 3 variations of "${conceptTitle}"`);
                        }, 2500);
                    } else if (action.includes('Use')) {
                        // Set as active concept
                        document.querySelectorAll('.concept-card').forEach(c => c.classList.remove('active'));
                        conceptCard.classList.add('active');
                        showAIInsight(`Selected "${conceptTitle}" as primary concept`);
                    }
                });
            });
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeControls);

        // AI Chat Functions
        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();

            if (!message) return;

            // Add user message
            addChatMessage(message, 'user');
            input.value = '';

            // Show typing indicator
            showTypingIndicator();

            // Simulate AI response
            setTimeout(() => {
                hideTypingIndicator();
                const responses = [
                    "Great idea! For 'The Cozy Commute' scene, I'd suggest emphasizing the golden-hour lighting and the peaceful, mindful aspect of modern commuting. This resonates strongly with your hybrid worker audience.",
                    "I can help refine that! The AI-generated concept has a 94% confidence score because it aligns with your brand's sustainability messaging and performs well with your target demographic.",
                    "For the ad copy, consider emphasizing the transformation aspect - 'Turn travel time into your time' speaks directly to the pain point of wasted commute time and offers a solution.",
                    "Based on AI analysis, concepts featuring natural lighting and authentic moments show high engagement potential with your target audience. The cozy, aspirational tone is perfect for this segment.",
                    "I'd recommend generating a variation that includes product close-ups alongside the lifestyle shot. This combination typically increases engagement for apparel campaigns."
                ];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                addChatMessage(randomResponse, 'ai');
            }, 1500);
        }

        function sendSuggestion(text) {
            const input = document.getElementById('chatInput');
            input.value = text;
            sendChatMessage();
        }

        function addChatMessage(text, type) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${type}`;

            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });

            messageDiv.innerHTML = `
                <div class="message-bubble">${text}</div>
                <span class="message-time">${timeString}</span>
            `;

            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTypingIndicator() {
            const messagesContainer = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'chat-message ai';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="typing-indicator">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            `;
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) {
                indicator.remove();
            }
        }

        function handleChatKeydown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendChatMessage();
            }
        }
    </script>
</body>
</html>
